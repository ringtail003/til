---
title: TypeScriptã§Enumã®ä»£ã‚ã‚Šã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆ©ç”¨ã™ã‚‹
description: 
published: true
tags: typescript
updatedAt: 2021-07-24
---

## æ–¹æ³•1

https://www.kabuku.co.jp/developers/good-bye-typescript-enum

constæ–‡å­—åˆ—ã®é…åˆ—ã«ã‚ˆã‚‹å®šç¾©ã€‚

```ts
export const roles = ['admin', 'developer', 'general'] as const;
export type Role = typeof roles[number];

// ç›´æ¥çš„ãªå€¤ã®å‚ç…§ ğŸ‘
const initialValue: Role = 'admin';

// åå¾©å‡¦ç† ğŸ‘
roles.forEach((role) => {
  // @error
  // if (role === 'foo') {}
});

// includesãŒå‹å®‰å…¨ã«ãªã‚‹ã‹ ğŸ‘
const specials: Role[] = ['admin', 'developer'];
specials.includes('admin');
// specials.includes('foobar');

// switchã«ã‚ˆã‚‹ç¶²ç¾… ğŸ‘
export function isRole(role: Role): boolean {
  switch (role) {
    case 'admin':
      return true;
    case 'developer':
      return true;
    case 'general':
      return true;

    default:
      throw new UnknownRoleError(role); // ç¶²ç¾…ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã‚¨ãƒ©ãƒ¼
  }
}

class UnknownRoleError extends Error {
  constructor(value: never) {
    super(`Unknown role "${value}".`);
  }
}
```

## æ–¹æ³•2

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ä»£ç”¨ã€‚

- ä»˜åŠ æƒ…å ±ã‚’æŒã¤ã“ã¨ãŒã§ãã‚‹

```ts
export type Role = 'admin' | 'developer' | 'general';

// é‡è¤‡ãƒ»æ¼ã‚Œã«æ°—ã¥ã‹ãªã„
export const roles: { id: Role; label: string }[] = [
  { id: 'admin', label: 'x' },
  { id: 'developer', label: 'y' },
  { id: 'general', label: 'z' },
];

// ç›´æ¥çš„ãªå€¤ã®å‚ç…§ ğŸ‘
const initialValue: Role = 'admin';

// åå¾©å‡¦ç† ğŸ¤”
roles.forEach((role) => {
  // @error
  // if (role.id === 'foo') {}

  // æ¯å› `.id` ãªã©ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
});

// includesãŒå‹å®‰å…¨ã«ãªã‚‹ã‹ ğŸ‘
const specials: Role[] = ['admin', 'developer'];
specials.includes('admin');
// specials.includes('foobar');

// switchã«ã‚ˆã‚‹ç¶²ç¾…
export function isRole(role: Role): boolean {
  switch (role) {
    case 'admin':
      return true;
    case 'developer':
      return true;
    case 'general':
      return true;

    default:
      throw new UnknownRoleError(role); // ç¶²ç¾…ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã‚¨ãƒ©ãƒ¼
  }
}

class UnknownRoleError extends Error {
  constructor(value: never) {
    super(`Unknown role "${value}".`);
  }
}
```

## æ–¹æ³•3

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å€¤ã‚’constå®£è¨€ã™ã‚‹ã€‚

- dotè¨˜æ³•ã«ã‚ˆã‚‹Enumçš„ãªä½¿ã„æ–¹ãŒã§ãã‚‹

```ts
export const roles = {
  admin: 'admin' as const,
  developer: 'developer' as const,
  general: 'general' as const,
};

export type Role = typeof roles[keyof typeof roles];

// ç›´æ¥çš„ãªå€¤ã®å‚ç…§ ğŸ‘ğŸ‘
const initialValue: Role = roles.admin;

// åå¾©å‡¦ç† ğŸ‘
Object.values(roles).forEach((role) => {
  // @error
  // if (role === 'foo') {}
});

// includesãŒå‹å®‰å…¨ã«ãªã‚‹ã‹ ğŸ‘ğŸ‘
const specials = [roles.admin, roles.developer];
specials.includes('admin');
// specials.includes('foobar');

// switchã«ã‚ˆã‚‹ç¶²ç¾… ğŸ‘ğŸ‘
export function isRole(role: Role): boolean {
  switch (role) {
    case roles.admin:
      return true;
    case roles.developer:
      return true;
    case roles.general:
      return true;

    default:
      throw new UnknownRoleError(role); // ç¶²ç¾…ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã‚¨ãƒ©ãƒ¼
  }
}

class UnknownRoleError extends Error {
  constructor(value: never) {
    super(`Unknown role "${value}".`);
  }
}

// ä»˜åŠ æƒ…å ±ã‚’æŒãŸã›ã‚‹æ™‚ã¯é–¢æ•°ã«ã™ã‚‹
function getLabel(id: Role): string {
  return {
    admin: "ç®¡ç†è€…",
    developer: "é–‹ç™ºè€…",
    general: "ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼",
  }[id] || id;
}
```
